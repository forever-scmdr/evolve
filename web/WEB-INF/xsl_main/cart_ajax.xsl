<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE stylesheet [<!ENTITY nbsp "&#160;"><!ENTITY copy "&#x000A9;" >]><xsl:stylesheet		xmlns:xsl="http://www.w3.org/1999/XSL/Transform"		xmlns:f="f:f"		version="2.0">	<xsl:import href="utils/utils.xsl"/>	<xsl:import href="snippets/constants.xsl"/>	<xsl:output method="html" encoding="UTF-8" media-type="text/xhtml" indent="yes" omit-xml-declaration="yes"/>	<xsl:variable name="cart" select="page/cart"/>	<xsl:template match="/">		<xsl:if test="$cart and (not($cart/processed) or $cart/processed != 1) and $cart/bought">			<div class="result" id="cart_ajax">				<div class="header-icon__icon" style="text-align: left;">					<img src="img/icon-cart.png" alt=""/>					<div class="header-icon__counter" style="left: 24px;"><xsl:value-of select="count($cart/bought)"/></div>					<xsl:if test="f:num($cart/sum) &gt; 0">						<!--						<span><xsl:value-of select="f:currency_decimal($cart/sum)"/></span>-->						<span style="font-weight: 700; padding-left: 10px;"><xsl:value-of select="f:exchange($cart, 'sum', 0)"/></span>					</xsl:if>					<xsl:if test="f:num($cart/sum) = 0">						<span style="font-weight: 700; padding-left: 10px;">Сумма по запросу</span>					</xsl:if>				</div>				<div class="header-icon__info">					<a href="{page/cart_link}">Корзина</a>					<a href="{page/cart_link}" class="header-icon__dd">						<img src="img/icon-caret-down-small.png" alt=""/>					</a>				</div>				<div class="dd-cart">					<div class="dd-cart__scroll">						<xsl:for-each select="$cart/bought">							<xsl:variable name="p" select="product"/>							<div class="dd-cart__item">								<a class="dd-cart__image" href="">									<img src="sitepics/{$p/pic_path}.jpg" alt=""/>								</a>								<div class="dd-cart__info">									<a class="dd-cart__name" href=""><xsl:value-of select="string-join(($p/name, $p/name_extra), ' ')"/></a>									<div class="dd-cart__code">Кол-во: <xsl:value-of select="concat(qty, $p/unit, ' ')"/></div>									<div class="ddcart__price"><xsl:value-of select="f:exchange_cur(., 'sum', 0)"/></div>								</div>								<a class="dd-cart__close" href="{$p/delete}" ajax="true">									<img src="img/icon-close.png" alt=""/>								</a>							</div>						</xsl:for-each>					</div>					<a class="dd-cart__button" href="{page/cart_link}">Перейти в корзину</a>				</div>			</div>			<div class="result" id="cart_mobile">				<div class="mobile-icon__icon">					<a href="{page/cart_link}"><img src="img/icon-cart.png" alt=""/></a>				</div>				<div class="mobile-icon__qty"><a style="text-decoration: inherit; color: inherit;" href="{page/cart_link}"><xsl:value-of select="count($cart/bought)"/></a></div>				<div class="mobile-icon__label">					<xsl:value-of select="if (f:num($cart/sum) &gt; 0) then f:exchange($cart, 'sum', 0) else 'По запросу'"/>				</div>				<a class="mobile-icon__link" href="{page/cart_link}"></a>			</div>			<xsl:for-each select="$cart/bought">				<div class="result" id="cart_list_{product/@id}">					<xsl:variable name="p" select="product"/>					<form action="{$p/to_cart}" method="post" ajax="true" ajax-loader-id="cart_list_{@id}">						<input type="number" class="input input_type_number" name="qty"							   value="{qty_total}" min="{if ($p/min_qty) then $p/min_qty else 0}" step="{if ($p/step) then f:num($p/step) else 1}"							   onchange="$('#sb_rec_{$p/@id}').show(); $('#sb_cart_{$p/@id}').hide();"						/>						<xsl:variable name="has_price" select="$p/price and $p/price != '0'"/>						<xsl:if test="$has_price">							<button class="button" type="submit" style="display:none" id="sb_rec_{$p/@id}"><xsl:value-of select="$to_cart_recalc_label"/></button>						</xsl:if>						<xsl:if test="not($has_price)">							<button class="button button_secondary" type="submit" style="display:none" id="sb_rec_{$p/@id}"><xsl:value-of select="$to_cart_recalc_label"/></button>						</xsl:if>						<button class="button button_checkout" type="submit" id="sb_cart_{$p/@id}" onclick="location.replace('{//page/cart_link}'); return false"><xsl:value-of select="$go_to_cart_label"/></button>					</form><!--					<form>						<button class="button button_checkout" type="submit" onclick="location.replace('{//page/show_cart}'); return false"><xsl:value-of select="$go_to_cart_label"/></button>					</form>-->				</div>				<span id="sum-{code}" class="result">					<xsl:value-of select="if(f:num(product/price) != 0) then f:exchange_cur(., 'sum', 0) else ''"/>				</span>			</xsl:for-each>		</xsl:if>		<xsl:if test="not($cart) or $cart/processed = 1 or not($cart/bought)">			<div class="result" id="cart_ajax">				<div class="header-icon__icon">					<img src="img/icon-cart.png" alt=""/>				</div>				<div class="header-icon__info" style="align-content: center; display: block;">					<a href="{page/cart_link}">Корзина</a>				</div>			</div>			<div class="result" id="cart_mobile">				<div class="mobile-icon__icon">					<a href="{page/cart_link}"><img src="img/icon-cart.png" alt=""/></a>				</div>				<div class="mobile-icon__label">Корзина</div>				<a class="mobile-icon__link" href="{page/cart_link}"></a>			</div>		</xsl:if><!--		<xsl:if test="f:num($cart/sum) != 0">-->			<div class="cart-total__text result" id="cart-total">				<xsl:value-of select="concat('Итого: ', f:exchange_cur(., 'sum', 0))" />			</div><!--		</xsl:if>-->        <xsl:for-each select="page/product">            <div class="result" id="cart_list_{@id}">                <xsl:variable name="has_price" select="price and price != '0'"/>                <form action="{to_cart}" method="post" ajax="true" ajax-loader-id="cart_list_{@id}">                    <xsl:if test="$has_price">                        <input type="number" class="input input_type_number" name="qty"                               value="{if (min_qty) then min_qty else 1}" min="{if (min_qty) then min_qty else 0}" step="{if (step) then f:num(step) else 0.1}" />                        <button class="button" type="submit"><xsl:value-of select="$to_cart_available_label"/></button>                    </xsl:if>                    <xsl:if test="not($has_price)">                        <input type="hidden" class="input input_type_number" name="qty"                               value="{if (min_qty) then min_qty else 1}" min="{if (min_qty) then min_qty else 0}" step="{if (step) then f:num(step) else 0.1}" />                        <button class="button button_secondary" type="submit" onclick="location.replace('{//page/cart_link}'); return false"><xsl:value-of select="$to_cart_na_label"/></button>                    </xsl:if>                </form>            </div>        </xsl:for-each>	</xsl:template></xsl:stylesheet>