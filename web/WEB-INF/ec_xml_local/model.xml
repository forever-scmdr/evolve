<?xml version="1.0" encoding="utf-8"?>
<items>

	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- //////////////////// ////////////////////////////// -->
	<!-- //////////////////// СПЕЦИАЛЬНЫЕ АЙТЕМЫ ////////////////////////////// -->
	<!-- //////////////////// ////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

	<!-- Параметры электронной почты -->
	<item name="feedback_params" caption="Параметры обратной связи">
		<parameter name="server_from" type="string" quantifier="single" caption="Адрес сервера" description="с которого отправлять обратную связь" />
		<parameter name="email_from" type="string" quantifier="single" caption="Откуда" description="Адрес почтового ящика, с которого отправлять обратную связь" />
		<parameter name="email_from_login" type="string" quantifier="single" caption="Логин" description="Для почтового ящика, с которого отправлять обратную связь" />
		<parameter name="email_from_password" type="string" quantifier="single" caption="Пароль" description="Для почтового ящика, с которого отправлять обратную связь" />
		<parameter name="encoding" type="string" quantifier="single" caption="Кодировка" description="В большинстве случаев подходит UTF-8" />
	</item>


	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- //////////////////// ////////////////////////////// -->
	<!-- //////////////////// ДЛЯ ДИЛЕРОВ ////////////////////////////// -->
	<!-- //////////////////// ////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->
	<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->

	<!-- My own RSS (with black-jack etc.) -->
	<item name="rss" caption="Рассылка">
		<parameter name="date" type="date" caption="дата последней рассылки" />
		<subitem name="agent" quantifier="multiple" />
	</item>

	<item name="agent" key="email" caption="Контрагент">
		<parameter name="refuzed" type="byte" domain="0-1" caption="Отказался от писем"/>
		<parameter name="register_date" type="date" caption="Дата регистрации" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="country" type="string" caption="Страна" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="region" type="string" caption="Область" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="city" type="string" caption="Город" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="organization" type="string" caption="Организация" text-index="fulltext"/>
		<parameter name="address" type="string" caption="Адрес" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="phone" type="string" caption="Телефон" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="email" type="string" caption="Email 1" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="email_2" type="string" caption="Email 2" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="email_3" type="string" caption="Email 3" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="site" type="string" caption="Адрес сайта" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="contact_name" type="string" caption="ФИО контактного лица" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="boss_position" type="string" caption="Должность руководителя организации"/>
		<parameter name="boss_position_dat" type="string" caption="Должность руководителя в дательном падеже"/>
		<parameter name="boss_name" type="string" caption="ФИО руководителя организации" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="boss_name_dat" type="string" caption="ФИО руководителя в дательном падеже"/>
		<parameter name="boss_greetings" type="string" caption="Обращение к руководителю"/>
		<parameter name="type" caption="Род деятельности организации" type="string" domain="firm_type" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="branch" caption="Отрасль" type="string" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="desc" type="tiny-text" caption="Примечание" text-index="fulltext" text-index-parameter="organization"/>
		<parameter name="tags" type="string" caption="разделы" quantifier="multiple" text-index="fulltext"/>
		<parameter name="emails_sent" quantifier="multiple" type="associated" caption="Отправленные письма" description="ID писем, которые были отправлены контрагенту"/>
		<subitem name="procurement" quantifier="multiple"/>
	</item>

	<item name="procurement" caption="Поставка" key="date">
		<parameter name="date" type="date" caption="Дата"/>
		<parameter name="text" type="plain-text" caption="Описание поставки" description="список оборудования"/>
	</item>

	<item name="agent_archive" key="date" caption="Архив контрагентов за дату">
		<parameter name="date" type="date" caption="Дата создания архива"/>
		<parameter name="file" type="file" caption="Файл" description="можно загрузить его и разобрать"/>
	</item>

	<item name="all_agents" caption="Контрагенты">
		<parameter name="last_updated" type="date" caption="Дата последнего обновления"/>
		<parameter name="file" type="file" caption="Файл c контрагентами"/>
		<subitem name="agent" quantifier="multiple"/>
		<subitem name="agent_archive" quantifier="multiple"/>
	</item>

	<item name="all_emails" caption="Все адреса email">
		<subitem name="emails" quantifier="single"/>
	</item>

	<item name="emails" caption="Адреса email">
		<subitem name="agent" quantifier="multiple"/>
		<parameter name="email" type="string" caption="Email" quantifier="multiple"/>
	</item>

	<item name="agents_extra" caption="Дополнительно для контрагентов">
		<subitem name="agent_types" quantifier="single"/>
		<subitem name="agent_branches" quantifier="single"/>
	</item>
	
	<item name="string_element" caption="Элемент" key="name">
		<parameter name="name" type="string" caption="Значение"/>
	</item>
	
	<item name="agent_types" caption="Роды деятельности">
		<subitem name="string_element" quantifier="multiple"/>
	</item>

	<item name="agent_branches" caption="Отрасли">
		<subitem name="string_element" quantifier="multiple"/>
	</item>

	<!-- ********************************* Рассылка ********************************* -->

	<item name="email_section" caption="Раздел со сформированными письмами" key="name">
		<parameter name="name" type="string" caption="Название" />
		<subitem name="email_section" quantifier="multiple"/>
		<subitem name="email_post" quantifier="multiple"/>
	</item>

	<item name="email_post" caption="Содержание письма" key="topic">
		<parameter name="topic" type="string" caption="Тема письма" description="отображается в общем списке писем почтового ящика"/>
		<parameter name="date" type="date" caption="Дата создания"/>
		<parameter name="number" type="string" caption="Номер"/>
		<parameter name="template" type="string" caption="Шаблон письма" domain="email_template" description="название шаблона, не обязательно"/>
		<parameter name="header" type="string" caption="Заголовок" description="выводится в теле письма большим шрифтом, не обязателен" />
		<parameter name="body" type="text" caption="Тело письма" 
			description="допускаются только простейшие тэги, сложные конструкции со стилями и скриптами не будут правильно отображаться"/>
		<parameter name="main_pic" type="picture" caption="Основная картинка" description="выводится над телом письма, ширина - 600px"/>
		<parameter name="pic" type="picture" caption="Картинка" description="для вставки в текст"/>
	</item>

	<item name="email_catalog" caption="Каталог всех писем">
		<subitem name="email_section" quantifier="multiple"/>
	</item>

	<item name="email_queue" caption="Очередь отправки писем">
		<subitem name="email_queue_item" quantifier="multiple"/>
	</item>

	<!-- 
	Хранится урл, который будет являться шаблоном письма. Шаблон письма перед отправкой будет разбираться JSoup для того, чтобы
	найти вставленные картинки и отправить их отделными частями много частного запроса. Также разбор нужен, чтобы получить 
	тему письма, которая хранится в элементе topic, и удалить этот элемент. 
	 -->
	<item name="email_queue_item" caption="Элемент очереди на отправку" key="email_url">
		<parameter name="date_added" type="date" caption="Время добавления в очередь"/>
		<parameter name="email_id" type="associated" caption="ID письма" description="для сохранения в истории отправки"/>
		<parameter name="agend_id" type="associated" caption="ID агента" description="для сохранения в истории отправки"/>
		<parameter name="address_to" type="string" caption="Адрес отрпавки письма"/>
		<parameter name="email_url" type="string" caption="Ссылка на страницу письма" 
			description="ссылка на обычнцю страницу CMS, которая является шаблоном письма. В ссылке могут передаваться переменные"/>
	</item>

	<!-- \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ Корневые айтемы //////////////////////////////////////////// -->

	<!-- ********************************* Основной корень ********************************* -->

	<root group="common">
		<subitem name="feedback_params" quantifier="single" />
		<subitem name="rss" quantifier="single"  virtual="true"/>
		<subitem name="all_agents" quantifier="single"  virtual="true"/><!-- Удалить на сайте на хостинге -->
		<subitem name="all_emails" quantifier="single" /><!-- Удалить на локальном сайте -->
		<subitem name="email_catalog" quantifier="single" virtual="true"/><!-- Удалить на сайте на хостинге -->
		<subitem name="email_queue" quantifier="single" virtual="true"/><!-- Удалить на сайте на хостинге -->
		<subitem name="agents_extra" quantifier="single" virtual=""/><!-- Удалить на сайте на хостинге -->
	</root>

</items>