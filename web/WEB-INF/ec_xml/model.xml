<?xml version="1.0" encoding="UTF-8"?>
<model>

	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             SEO                                      ////////////-->


	<!-- SEO -->
	<!--
	Сео представляет собой набор сео тегов для страницы. Фактически айтемы сео связаны с другими информационными
	айтемами, такими как товары или разделы. Чтобы на сео не влияли манипуляции с каталогом (парсинг, удаления
	и т.д.), создан отдельный каталог-хранилище для всех сео айтемов. Сео айтемы не хранятся внутри соответсвующих
	товаров или разделов.
	Однако, чтобы выяснить к какому айтему относится сео, в нем есть параметр key_unique - т.е. уникальный текстовый
	ключ айтема. Когда соответсвующий айтем (например, товар) удаляется, сео айтем не удаляется. Потом если вновь
	создать айтем товара с тем же ключом, к нему подсоединится автоматически нужный сео айтем.
	Каталог сео айтемов не предназначен для редактирования напрямую. Он не видим в системе управления.
	Пользователь создает айтем SEO в соответствующем главном айтеме (товаре, например), после этого этот айтем
	копируется в невидимый каталог сео айтемов, из главного айтема сео удаляется, из главного айтема ставится
	связь с сео айтемом из невидимого каталога. В дальнейшем пользователь работает с сео айтемом из невидимого
	сео каталога.

	Для удобства управления айтемами и их сео, создана ассоциация seo. Она связывает айтем (товар) с соответствующим
	сео айтемом. Эта связь создается автоматически обработчиком при сохранении сео айтема и главного айтема.

	(Дополнительно: Для извлечения в pages.xml ключа айтема, можно использовать имя параметра @key)

	-->

	<assoc name="seo" caption="SEO" description="Связь айтемов с seo" transitive="false" ag-id="1" ag-hash="113757"/>


	<item name="seo" caption="SEO" key="key_unique" ag-id="2512" ag-hash="113757">
		<parameter name="key_unique" caption="Ключ страницы" type="string"
		           description="должен совпадать с уникальным текстовым ключом соответствующего айтема"/>
		<parameter name="title" type="string" caption="title"/>
		<parameter name="h1" type="string" caption="h1"/>
		<parameter name="description" type="string" caption="description"/>
		<parameter name="keywords" type="string" caption="keywords"/>
		<parameter name="meta" caption="meta" type="plain-text"/>
		<parameter name="text" caption="текст" type="text"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
		<on-create class="ecommander.fwk.integration.CreateSeoItemFactory"/>
	</item>

	<item name="url_seo" key="name" caption="SEO" ag-id="2513" ag-hash="-169844339">
		<parameter name="name" type="string" caption="Название" description="для поиска в CMS"/>
		<parameter name="url" type="string" caption="URL" description="должен совпадать с подсказкой в коде страницы"/>
		<parameter name="title" type="string" caption="title"/>
		<parameter name="h1" type="string" caption="h1"/>
		<parameter name="description" type="string" caption="description"/>
		<parameter name="keywords" type="string" caption="keywords"/>
		<parameter name="meta" caption="meta" type="plain-text"/>
		<parameter name="text" caption="текст" type="text"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="url_seo_wrap" caption="Хранилище спец. SEO" ag-id="2514" ag-hash="843192252">
		<parameter name="main_host" type="string" caption="основной домен" description="без слэша вконце"/>
		<child item="url_seo" />
	</item>

	<item name="seo_catalog" caption="Каталог SEO" description="невидимый" ag-id="2523" ag-hash="990975543">
		<child item="seo"/>
	</item>

	<item name="seo_container" caption="Контейнер для сео айтемов" virtual="true" key-unique="true" ag-id="2524" ag-hash="1272836895">
		<child item="seo" single="true" assoc="seo" virtual="true"/><!-- Связь с сео айтемом из сао каталога -->
		<child item="seo" single="true"/><!-- Для создания нового сео -->
		<on-update class="ecommander.fwk.integration.UpdateSeoContainerItemFactory"/><!-- Обновить параметр key_unique в seo -->
		<on-create class="ecommander.fwk.integration.CreateSeoContainerItemFactory"/><!-- Создать связь с seo (если он есть) -->
	</item>

	<!--/////////////                            END SEO                                   ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->







	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             КАТАЛОГ                                  ////////////-->


	<item name="catalog" caption="Каталог продукции" children-per-page="30" children-sorting="ASC" super="seo_container" ag-id="2" ag-hash="555704345">
		<child item="section" />
		<child item="temporary_section" single="true"/>
		<parameter name="integration" type="file" caption="Excel файл интеграции" description="обновление цены" />
		<parameter name="date" type="date" caption="Дата обновления каталога" format=""/>
	</item>


	<item name="section" default-page="section" key="name" caption="Раздел" key-unique="true" super="seo_container" ag-id="3" ag-hash="1970241253">
		<child item="section" />
		<child item="product"/>
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="show_devices" type="byte" caption="Показать товары" domain="0-1"/>
		<parameter name="category_id" type="string" caption="Код раздела" description="в яндекс маркете" />
		<parameter name="parent_id" type="string" caption="Код родительского раздела" description="в яндекс маркете" />
		<parameter name="main_pic" type="picture" caption="Картинка" description="для страницы списка разделов"/>
		<parameter name="params_filter" type="filter" caption="Фильтр" description="для продукции" />
	</item>

	<item name="temporary_section" caption="Временный раздел" ag-id="2522" ag-hash="-1063730441">
		<child item="product"/>
		<parameter name="integration" type="file" caption="Excel файл интеграции" description="обновление цен" />
	</item>

	<!-- Основной раздел может быть не обязательно первого уровня (может быть на любом уровне) -->
	<item name="main_section" caption="Онсовной раздел" super="section"
	      description="раздел, который выделяется из остальных (определяется не только названием">
		<parameter name="name_extra" type="string" caption="Другое название" description="выводится на главной вместо основного при наличии"/>
	</item>


	<!--Товар из магазина yandex market-->
	<item name="product" key="name vendor_code" caption="Продукт" extendable="false" key-unique="true" default-page="product" super="seo_container" ag-id="6" ag-hash="-309474065">
		<parameter name="name" type="string" caption="Наименование" description="продукта" text-index="fulltext" />
		<parameter name="type" type="string" caption="Тип товара" description="например, аккумуляторный лобзик" text-index="fulltext" />
		<parameter name="code" type="string" caption="Уникальный артикул товара" description="в данном случае совпадает с offer_id" text-index="fulltext"/>
		<parameter name="on_main" type="string" domain="yes-no" caption="Показать на главной странице?"/>
		<parameter name="name_extra" type="string" caption="Дополнительно к названию" description="например, 18В ; MetaLoc" text-index="fulltext" />
		<parameter name="vendor_code" type="string" caption="Артикул" description="продукта" text-index="fulltext" />
		<parameter name="offer_id" type="string" caption="Код предложения" description="в яндекс маркете"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" text-index="fulltext" />
		<parameter name="available" type="byte" caption="В наличии" description="в яндекс маркете"/>
		<parameter name="group_id" type="string" caption="Номер группы" description="в яндекс маркете все товары одной группы выводятся на одной странице"/>
		<parameter name="url" type="string" caption="Урл исходной страницы" description="с исходного сайта"/>
		<parameter name="category_id" type="string" caption="Номер конечного раздела"/>
		<parameter name="currency_id" type="string" caption="Код валюты цены"/>
		<parameter name="price_original" type="currency" caption="Цена в оригинале" description="в валюте с кодом currency_id"/>
		<parameter name="price" type="currency" caption="Цена" description="в валюте текущего сайта"/>
		<parameter name="qty" type="double" caption="Количество на складе"/>
		<parameter name="country" type="string" caption="Страна производства"/>
		<parameter name="main_pic" type="picture" format="width: 300" caption="Главная картинка"/>
		<parameter name="description" type="text" caption="Описание" text-index="fulltext" />
		<parameter name="text" type="text" caption="Полное описание" text-index="fulltext" />
		<parameter name="extra_xml" type="xml" caption="Дополнительно XML" text-index="fulltext" />
		<parameter name="text_pics" type="picture" caption="Картинки для вставки в текст" multiple="true"/>
		<parameter name="gallery" type="picture" caption="Галерея" multiple="true"/>
		<parameter name="assoc_code" type="string" caption="Код связанного товара" multiple="true"/>
		<parameter name="tag" type="string" caption="Тэг" multiple="true"/>
		<child item="product_extra"/>
		<child item="params_xml" single="true"/>
		<child item="params" single="true"/>
	</item>

	<item name="params" caption="Параметры товара" extendable="true" ag-id="30" ag-hash="-995427962"/>

	<item name="product_extra" caption="Дополнительные страницы для товара" key="name" ag-id="2526" ag-hash="1373246656">
		<parameter name="name" type="string" caption="Заголовок страницы"/>
		<parameter name="text" type="text" caption="Полное описание" text-index="fulltext" />
		<parameter name="text_pics" type="picture" caption="Картинки для вставки в текст" multiple="true"/>
	</item>
	<!--
	Для хранения пользовательских параметров товара, список которых отличается в зависимости от раздела или типа товара
	Хранить их в текстовом виде нужно чтобы можно было создавать заново айтем с параметрами товара params в случае
	если надо поменять тип этого айтема. А это нужно, например, когда заново создаются фильтры для разделов
	Также в этот айтем сохраняются значения всех параметров, содержащихся в айтеме params
	Параметры хранятся в таком же виде, как и пользовательские параметры в айтеме, т.е. сохранятся путём вызова
	params.outputValues();
	Вид хранения:
	<group>         // Не обязательно должны быть группы, это просто для красоты вывода
		<name>Звуковая эмиссия</name>           // имя группы
		<parameter>
			<name>Уровень звукового давления</name>
			<value>93 дБ(А)</value>
		</parameter>
		<parameter>
			<name>Уровень звуковой мощности (LwA)</name>
			<value>104 дБ(А)</value>
		</parameter>
	</group>
	-->
	<item name="params_xml" caption="Параметры в виде XML" ag-id="2527" ag-hash="471057886">
		<parameter name="xml" type="xml" caption="Параметры" />
	</item>


	<!--/////////////                            END КАТАЛОГ                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->





	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             КОРЗИНА                                  ////////////-->


	<!-- Параметры электронной почты -->
	<item name="feedback_params" caption="Параметры обратной связи" ag-id="28" ag-hash="-1139606656">
		<parameter name="server_from" type="string" caption="Адрес сервера" description="с которого отправлять обратную связь"/>
		<parameter name="email_from" type="string" caption="Откуда" description="Адрес почтового ящика, с которого отправлять обратную связь"/>
		<parameter name="email_from_password" type="string" caption="Пароль" description="Для почтового ящика, с которого отправлять обратную связь"/>
		<parameter name="encoding" type="string" caption="Кодировка" description="В большинстве случаев подходит UTF-8"/>
	</item>



	<item name="bought" caption="Покупка" virtual="true" key="code" ag-id="16" ag-hash="-1383211797">
		<parameter name="name" type="string" caption="Наименование товара" description="не обязательно. Используется только в истории заказов"/>
		<parameter name="code" type="string" caption="Код товара"/>
		<parameter name="qty" type="double" caption="Количество"/>
		<parameter name="price" type="currency" caption="Цена товара"/>
		<parameter name="sum" type="currency" caption="Полная стоимость"/>
		<child item="product" single="true"/>
	</item>

	<item name="cart" caption="Корзина" virtual="true" ag-id="17" ag-hash="3046176">
		<parameter name="order_num" type="string" caption="Номер заказа"/>
		<parameter name="qty" type="double" caption="Количество товаров"/>
		<parameter name="sum" type="currency" caption="Общая сумма"/>
		<parameter name="processed" type="byte" caption="Корзина уже обработана"/>
		<child item="bought"/>
	</item>

	<item name="counter" caption="Счетчик номера договора" ag-id="29" ag-hash="957830652">
		<parameter name="count" type="integer" caption="Счетчик"/>
	</item>

	<!--/////////////                            END КОРЗИНА                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->





	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             РЕГИСТРАЦИЯ                              ////////////-->

	<item name="purchase" caption="Заказ" key="num" ag-id="1193" ag-hash="1743324417">
		<parameter name="num" caption="Номер" type="string"/>
		<parameter name="date" caption="Дата" type="date"/>
		<parameter name="qty" type="double" caption="Количество товаров"/>
		<parameter name="sum" type="currency" caption="Общая сумма"/>
		<child item="bought"/>
	</item>

	<item name="user" caption="Зарегистрированный пользователь" key="email" ag-id="1194" ag-hash="3599307">
		<parameter name="email" type="string" caption="E-mail"/>
		<parameter name="password" type="string" caption="Пароль"/>
		<parameter name="payment" type="string" caption="название электронной системы оплаты"/>
		<child item="purchase"/>
	</item>

	<item name="user_jur" caption="Юридическое лицо" super="user" ag-id="23" ag-hash="-266151405">
		<parameter name="organization" type="string" caption="Наименование организации" />
		<parameter name="phone" type="string" caption="Телефон/факс" />
		<parameter name="contact_name" type="string" caption="Контактное лицо" />
		<parameter name="contact_phone" type="string" caption="Телефон контактного лица" />
		<parameter name="email" type="string" caption="E-mail" />
		<parameter name="address" type="string" caption="Юридический адрес" />
		<parameter name="ship_type" type="string" caption="Способ доставки" />
		<parameter name="pay_type" type="string" caption="Способ оплаты" />
		<parameter name="no_account" type="string" caption="Нет расчетного счета" domain="yes-no"/>
		<parameter name="account" type="string" caption="Расчетный счет" />
		<parameter name="bank" type="string" caption="Название банка" />
		<parameter name="bank_address" type="string" caption="Адрес банка"/>
		<parameter name="bank_code" type="string" caption="Код банка" />
		<parameter name="unp" type="string" caption="УНП" />
		<parameter name="director" type="string" caption="Ф.И.О директора" />
		<parameter name="base" type="string" caption="Действует на основании" />
		<parameter name="base_number" type="string" caption="Номер свиделельства/доверенности" />
		<parameter name="base_date" type="string" caption="Дата свиделельства/доверенности" />
		<parameter name="comment" type="string" caption="Дополнительно" />
	</item>

	<item name="user_phys" caption="Физическое лицо" super="user" ag-id="24" ag-hash="339407622" >
		<parameter name="name" type="string" caption="Имя"/>
		<parameter name="phone" type="string" caption="Телефон"/>
		<parameter name="address" type="string" caption="Адрес" />
		<parameter name="ship_type" type="string" caption="Способ доставки" />
		<parameter name="pay_type" type="string" caption="Способ оплаты" />
		<parameter name="comment" type="string" caption="Дополнительно" />
	</item>


	<item name="registered_catalog" caption="Каталог пользователей" ag-id="1195" ag-hash="-755203236">
		<child item="user"/>
	</item>


	<!--/////////////                            END РЕГИСТРАЦИЯ                           ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->

	<item name="news_item" key="header date" caption="Новость или статья" key-unique="true" default-page="news_item" super="seo_container" ag-id="11" ag-hash="300774655">
		<parameter name="header" type="string" caption="Заголовок"/>
		<parameter name="date" type="date" caption="Дата публикации"/>
		<parameter name="main_pic" type="picture" caption="Главное изображение" description="для списка статей или новостей"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" description="для списка статей или новостей"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="news" caption="Новости раздел" default-page="news"  super="seo_container" ag-id="12" ag-hash="3377875">
		<child item="news_item"/>
	</item>


	<item name="main_promo_bottom" caption="Промо-блок на главной" key="text_big" ag-id="14" ag-hash="1303283745">
		<parameter name="text_big" type="string" caption="Текст крупным шрифтом"/>
		<parameter name="text_small" type="string" caption="Текст мелким шрифтом"/>
		<parameter name="pic" type="picture" caption="Изображение"/>
		<parameter name="link" type="string" caption="Ссылка" description="начиная с http://"/>
	</item>

	<item name="main_slider_frame" caption="Кадр для слайдера" key="name" ag-id="1189" ag-hash="-806170283">
		<parameter name="name" type="string" caption="Название" description="для наглядности"/>
		<parameter name="pic" type="picture" caption="Картинка"/>
	</item>

	<item name="main_page" caption="Главная страница" description="Содержимое главной страницы" super="seo_container" ag-id="2901" ag-hash="-251149995">
		<!-- <child item="seo" single="true"/> -->
		<child item="main_promo_bottom" inline="true"/>
		<child item="main_slider_frame" inline="true"/>
	</item>


	<item name="contacts" caption="Контакты" ag-id="21" ag-hash="-567451565">
		<child item="seo" single="true"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="map" type="plain-text" caption="Код карты" format="height: 50px"/>
		<parameter name="bottom_text" type="text" caption="Как добраться"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="common" caption="На всех страницах" ag-id="22" ag-hash="-1354814997">
		<parameter name="top" type="short-text" caption="Верх" description="телефоны"/>
		<parameter name="left" type="short-text" caption="Заказ и консультация" description="под каталогом"/>
		<parameter name="link_text" type="string" caption="Текст ссылки на акцию" description="выводится слева под каталогом"/>
		<parameter name="link_link" type="string" caption="Ссылка на акцию" description="начиная с http://"/>
		<parameter name="bottom" type="short-text" caption="Телефоны внизу"/>
		<parameter name="bottom_address" type="short-text" caption="Адрес внизу"/>
		<parameter name="google_verification" type="string" caption="google verification code"/>
		<parameter name="yandex_verification" type="string" caption="yandex verification code"/>
	</item>


	<item name="feedback_form" caption="Форма обратной связи" virtual="true" ag-id="25" ag-hash="-1950071490">
		<parameter name="name" type="string" caption="Имя"/>
		<parameter name="phone" type="string" caption="Телефон"/>
		<parameter name="email" type="string" caption="E-mail"/>
		<parameter name="message" type="string" caption="Сообщение" />
	</item>

	<item name="custom_pages" caption="Информационные разделы" ag-id="26" ag-hash="727106934">
		<child item="custom_page"/>
	</item>

	<item name="custom_page" caption="Одиночная страница" key="header" key-unique="true" default-page="page" super="seo_container" ag-id="27" ag-hash="-1777660259">
	<!-- 	<child item="seo" single="true"/> -->
		<child item="custom_page"/>
		<parameter name="header" type="string" caption="Заголовок"/>
		<parameter name="main_pic" type="picture" caption="Главное изображение" description="для списка статей"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" description="для списка статей"/>
		<parameter name="in_main_menu" type="string" domain="yes-no" caption="Выводить в главном меню"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="modules" caption="Метрики, чаты и.т.д" ag-id="2482" ag-hash="1227433863">
		<child item="named_code"/>
	</item>

	<item name="named_code" key="name" caption="Модуль" ag-id="2483" ag-hash="-281007309">
		<parameter name="name" type="string" caption="Имя"/>
		<parameter name="code" type="plain-text" caption="Код для вставки на сайт"/>
	</item>

	<item name="file_overriders" caption="Перезапись файлов" description="Тут можно создаввать айтемы, перезаписывающие файлы" ag-id="2516" ag-hash="-253836880">
		<child item="text_file_overrider"/>
		<child item="file_overrider"/>
		<child item="robots_text_overrider" single="true"/>
		<child item="robots_overrider" single="true"/>
	</item>

	<item name="text_file_overrider" key="name" caption="Файл (текстовый)" description="Позволяет презаписать любой файл. Только для разработчиков!" ag-id="2517" ag-hash="1723673717">
		<parameter name="name" type="string" caption="Название"/>
		<parameter name="src" type="string" caption="Файл" description="путь к файлу, который нужно перезаписать" />
		<parameter name="file_content" type="plain-text" caption="Содержимое файла" description="После сохранения файл бует презаписан!" format="src: src;"/>
		<on-update class="ecommander.fwk.WriteToDestFileFactory"/>
		<on-create class="ecommander.fwk.WriteToDestFileFactory"/>
	</item>

	<item name="file_overrider" key="name" caption="Файл" description="Прикрепленный файл копируется в указанное место" ag-id="2518" ag-hash="1238737699">
		<parameter name="name" type="string" caption="Название"/>
		<parameter name="src" type="string" caption="Файл" description="путь к файлу, который нужно перезаписать" />
		<parameter name="file_content" type="file" caption="Файл для копирования" description="После сохранения файл бует презаписан!" format="src: src;"/>
		<on-update class="ecommander.fwk.WriteToDestFileFactory"/>
		<on-create class="ecommander.fwk.WriteToDestFileFactory"/>
	</item>

	<item name="robots_text_overrider" caption="Перезапись robots.txt" ag-id="2519" ag-hash="995375434">
		<parameter name="file_content" type="plain-text" caption="Содержимое файла" description="После сохранения файл бует презаписан!" format="dest: robots.txt;"/>
		<on-update class="ecommander.fwk.WriteToDestFileFactory"/>
		<on-create class="ecommander.fwk.WriteToDestFileFactory"/>
	</item>

	<item name="robots_overrider" caption="Прикрепить robots.txt" ag-id="2520" ag-hash="613905584">
		<parameter name="file_content" type="file" caption="Файл для копирования" description="После сохранения файл бует презаписан!" format="dest: robots.txt;"/>
		<on-update class="ecommander.fwk.WriteToDestFileFactory"/>
		<on-create class="ecommander.fwk.WriteToDestFileFactory"/>
	</item>

	<root>
		<child item="feedback_params" single="true" />
		<child item="catalog" single="true" />
		<child item="main_page" single="true"/>
		<child item="news" single="true"/>
		<child item="contacts" single="true"/>
		<child item="common" single="true"/>
		<child item="custom_pages" single="true"/>
		<child item="registered_catalog" single="true"/>
		<child item="counter" single="true" virtual="true"/>
		<child item="modules" single="true"/>
		<child item="url_seo_wrap" single="true"/>
		<child item="file_overriders" single="true" />
		<child item="seo_catalog" single="true" />
	</root>


</model>