<?xml version="1.0" encoding="UTF-8"?>
<model>


	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             ПАРСИНГ                                  ////////////-->

	<item name="parse_section" caption="Раздел для разбора" virtual="true" ag-id="10" ag-hash="-814293671">
		<parameter name="item_urls" type="plain-text" caption="Урлы вложенных товаров" />
		<child item="parse_item"/>
	</item>


	<item name="parse_item" caption="Товар для парсинга" key="url downloaded parsed got_files" ag-id="9" ag-hash="-980954849">
		<parameter name="url" type="string" caption="URL"/>
		<parameter name="downloaded" type="byte" caption="Downloaded" default="0"/>
		<parameter name="parsed" type="byte" caption="Parsed" default="0"/>
		<parameter name="got_files" type="byte" caption="Files downloaded" default="0"/>
		<parameter name="duplicated" type="byte" caption="Урл дублирован (повторная загрузка не нужна)" default="0"/>
		<parameter name="html" type="plain-text" caption="HTML" description="полученный с сервера"/>
		<parameter name="xml" type="plain-text" caption="XML" description="после обработки xsl"/>
		<parameter name="test_url" type="string" caption="Ссылка для тестирования XSL преобразования"
		           description="должна быть соответствующая страница в pages.xml (test_parse_item)"/>
		<parameter name="file" type="file" caption="Файл" description="скачанный файл" multiple="true"/>
	</item>

	<!--/////////////                            END ПАРСИНГ                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->






	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             КАТАЛОГ                                  ////////////-->


	<!--Ассоциация для товаров в разделах. Один товар может быть в нескольних разных разделах-->
	<assoc name="contains" caption="Раздел содержит" transitive="true" ag-id="1" ag-hash="-567445985"/>


	<item name="product_container" virtual="true" caption="Контейнер для продуктов" ag-id="1" ag-hash="-268176079" />


	<item name="catalog" caption="Каталог продукции" super="product_container" children-per-page="30" children-sorting="ASC" ag-id="2" ag-hash="555704345">
		<child item="section" />
		<parameter name="integration" type="file" caption="XML файл интеграции" description="используемые классы и параметры должны быть созданы до начала разбора файла" />
		<parameter name="date" type="date" caption="Дата обновления каталога" format=""/>
	</item>

	<!--Является также и разделом для парсинга-->
	<!--Товары прикреаляются отдельной ассоциацией, т.к. один товар может быть в нескольних разных разделах-->
	<item name="section" default-page="section" key="name" caption="Раздел" super="* product_container parse_section" key-unique="true" ag-id="3" ag-hash="1970241253">
		<child item="parse_item" />
		<child item="section" />
		<child assoc="contains" item="product"/>
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="code" type="string" caption="Уникальный код" description="можно часть урла" />
		<parameter name="main_pic" type="picture" caption="Картинка" description="для страницы списка разделов"/>
		<parameter name="short" type="short-text" caption="Краткое описание" />
	</item>

	<!--Тут физически лежат товары. К разделу каталога они прикрепляются специальной ассоциацией-->
	<item name="back_section" key="name" caption="Невидимый раздел" ag-id="4" ag-hash="-810986611">
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="code" type="string" caption="Уникальный код" description="т.к. название может повторяться" />
		<child item="product" />
	</item>

	<item name="back_catalog" caption="Невидимый каталог" ag-id="5" ag-hash="2069443777">
		<child item="back_section"/>
	</item>

	<!--Товар. Получается в результате парсинга-->
	<item name="product" key="name code" caption="Продукт" extendable="true" key-unique="true" default-page="product" ag-id="6" ag-hash="-309474065">
		<parameter name="name" type="string" caption="Наименование" description="продукта" text-index="fulltext" />
		<parameter name="code" type="string" caption="Артикул" description="продукта" text-index="fulltext" />
		<parameter name="main_pic" type="picture" caption="Главная картинка"/>
		<parameter name="price" type="double" caption="Цена"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" text-index="fulltext" />
		<parameter name="text" type="text" caption="Полное описание" text-index="fulltext" />
		<parameter name="tech" type="xml" caption="Технические характеристики" description="в виде таблицы для вывода" />
		<parameter name="apply" type="text" caption="Применение" description="текст" />
		<parameter name="accessiories" type="string" caption="Сопутствующий товар" description="список артикулов" multiple="true"/>
		<parameter name="sets" type="string" caption="Наборы" description="список артикулов" multiple="true"/>
		<parameter name="probes" type="string" caption="Зонды" description="список артикулов" multiple="true"/>
		<parameter name="gallery" type="picture" caption="Галерея" multiple="true"/>
		<parameter name="text_pics" type="picture" caption="Картинки для вставки в текст" multiple="true"/>
		<parameter name="video" type="string" caption="Ссылка на видео" multiple="true"/>
		<child item="tag_first"/>
	</item>

	<item name="tag_first" caption="Тэг первого уровня" key="tag" ag-id="7" ag-hash="2078366155">
		<parameter name="tag" caption="Тэг" type="string"/>
		<child item="tag_second"/>
	</item>

	<item name="tag_second" caption="Тэг второго уровня" key="name_value" ag-id="8" ag-hash="372875449">
		<parameter name="name" caption="Название тэга" type="string"/>
		<parameter name="value" caption="Значение тэга" type="string"/>
		<parameter name="name_value" type="string" caption="Тэг" description="сам тэг для поиска"/>
	</item>

	<!--/////////////                            END КАТАЛОГ                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->



	<item name="news_item" key="header date" caption="Новость или статья" key-unique="true" default-page="news_item" ag-id="11" ag-hash="300774655">
		<parameter name="header" type="string" caption="Заголовок"/>
		<parameter name="date" type="date" caption="Дата публикации"/>
		<parameter name="main_pic" type="picture" caption="Главное изображение" description="для списка статей или новостей"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" description="для списка статей или новостей"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="news" caption="Новости" ag-id="12" ag-hash="3377875">
		<child item="news_item"/>
	</item>

	<item name="articles" caption="Статьи" ag-id="13" ag-hash="-1228877251">
		<child item="news_item"/>
	</item>

	<item name="main_promo_bottom" caption="Промо-блок на главной" key="text_big" ag-id="14" ag-hash="1303283745">
		<parameter name="text_big" type="string" caption="Текст крупным шрифтом"/>
		<parameter name="text_small" type="string" caption="Текст мелким шрифтом"/>
		<parameter name="pic" type="picture" caption="Изображение"/>
		<parameter name="link" type="string" caption="Ссылка" description="начиная с http://"/>
	</item>

	<item name="main_page" caption="Главная страница" ag-id="15" ag-hash="-251149995">
		<parameter name="link_text" type="string" caption="Текст ссылки на акцию" description="выводится слева под каталогом"/>
		<parameter name="link_link" type="string" caption="Ссылка на акцию" description="начиная с http://"/>
		<child item="main_promo_bottom" inline="true"/>
	</item>

	<root>
		<child item="catalog" single="true" />
		<child item="back_catalog" single="true" />
		<child item="main_page" single="true"/>
		<child item="news" single="true"/>
		<child item="articles" single="true"/>
	</root>


<!--EXP-->
</model>