<?xml version="1.0" encoding="UTF-8"?>
<model>


	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             ПАРСИНГ                                  ////////////-->

	<item name="parse_section" caption="Раздел для разбора" virtual="true" ag-id="10" ag-hash="-814293671">
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="item_urls" type="plain-text" caption="Урлы вложенных товаров" />
		<child item="parse_item"/>
	</item>


	<item name="parse_item" caption="Товар для парсинга" key="url downloaded parsed got_files" ag-id="9" ag-hash="-980954849">
		<parameter name="url" type="string" caption="URL"/>
		<parameter name="downloaded" type="byte" caption="Downloaded" default="0"/>
		<parameter name="parsed" type="byte" caption="Parsed" default="0"/>
		<parameter name="got_files" type="byte" caption="Files downloaded" default="0"/>
		<parameter name="duplicated" type="byte" caption="Урл дублирован (повторная загрузка не нужна)" default="0"/>
		<parameter name="html" type="plain-text" caption="HTML" description="полученный с сервера"/>
		<parameter name="xml" type="plain-text" caption="XML" description="после обработки xsl"/>
		<parameter name="test_url" type="string" caption="Ссылка для тестирования XSL преобразования"
		           description="должна быть соответствующая страница в pages.xml (test_parse_item)"/>
		<parameter name="file" type="file" caption="Файл" description="скачанный файл" multiple="true"/>
	</item>

	<!--/////////////                            END ПАРСИНГ                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->






	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             КАТАЛОГ                                  ////////////-->


	<!--Ассоциация для товаров в разделах. Один товар может быть в нескольних разных разделах-->
	<assoc name="contains" caption="Раздел содержит" transitive="true" ag-id="1" ag-hash="-567445985"/>


	<item name="product_container" virtual="true" caption="Контейнер для продуктов" ag-id="1" ag-hash="-268176079" />


	<item name="catalog" caption="Каталог продукции" super="product_container" children-per-page="30" children-sorting="ASC" ag-id="2" ag-hash="555704345">
		<child item="section" />
		<parameter name="integration" type="file" caption="Excel файл интеграции" description="обновление цены" />
		<parameter name="date" type="date" caption="Дата обновления каталога" format=""/>
	</item>

	<!--Является также и разделом для парсинга-->
	<!--Товары прикреаляются отдельной ассоциацией, т.к. один товар может быть в нескольних разных разделах-->
	<item name="section" default-page="section" key="name" caption="Раздел" super="* product_container parse_section" key-unique="true" ag-id="3" ag-hash="1970241253">
		<child item="parse_item" />
		<child item="section" />
		<child assoc="contains" item="product"/>
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="code" type="string" caption="Уникальный код" description="можно часть урла" />
		<parameter name="main_pic" type="picture" caption="Картинка" description="для страницы списка разделов"/>
		<parameter name="short" type="short-text" caption="Краткое описание" />
	</item>

	<!--Тут физически лежат товары. К разделу каталога они прикрепляются специальной ассоциацией-->
	<item name="back_section" key="name" caption="Невидимый раздел" ag-id="4" ag-hash="-810986611">
		<parameter name="name" type="string" caption="Название" description="раздела" />
		<parameter name="code" type="string" caption="Уникальный код" description="т.к. название может повторяться" />
		<child item="product" />
	</item>

	<item name="back_catalog" caption="Невидимый каталог" ag-id="5" ag-hash="2069443777">
		<child item="back_section"/>
	</item>

	<!--Товар. Получается в результате парсинга-->
	<item name="product" key="name code" caption="Продукт" extendable="true" key-unique="true" default-page="product" ag-id="6" ag-hash="-309474065">
		<parameter name="name" type="string" caption="Наименование" description="продукта" text-index="fulltext" />
		<parameter name="code" type="string" caption="Артикул" description="продукта" text-index="fulltext" />
		<parameter name="main_pic" type="picture" caption="Главная картинка"/>
		<parameter name="price" type="currency" caption="Цена"/>
		<parameter name="qty" type="double" caption="Количество на складе"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" text-index="fulltext" />
		<parameter name="text" type="text" caption="Полное описание" text-index="fulltext" />
		<parameter name="tech" type="xml" caption="Технические характеристики" description="в виде таблицы для вывода" />
		<parameter name="apply" type="text" caption="Применение" description="текст" />
		<parameter name="accessiories" type="string" caption="Сопутствующий товар" description="список артикулов" multiple="true"/>
		<parameter name="sets" type="string" caption="Наборы" description="список артикулов" multiple="true"/>
		<parameter name="probes" type="string" caption="Зонды" description="список артикулов" multiple="true"/>
		<parameter name="gallery" type="picture" caption="Галерея" multiple="true"/>
		<parameter name="text_pics" type="picture" caption="Картинки для вставки в текст" multiple="true"/>
		<parameter name="video" type="string" caption="Ссылка на видео" multiple="true"/>
		<child item="tag_first"/>
	</item>

	<item name="tag_first" caption="Тэг первого уровня" key="tag" ag-id="7" ag-hash="2078366155">
		<parameter name="tag" caption="Тэг" type="string"/>
		<child item="tag_second"/>
	</item>

	<item name="tag_second" caption="Тэг второго уровня" key="name_value" ag-id="8" ag-hash="372875449">
		<parameter name="name" caption="Название тэга" type="string"/>
		<parameter name="value" caption="Значение тэга" type="string"/>
		<parameter name="name_value" type="string" caption="Тэг" description="сам тэг для поиска"/>
	</item>

	<!--/////////////                            END КАТАЛОГ                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->



	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             КОРЗИНА                                  ////////////-->


	<!-- Параметры электронной почты -->
	<item name="feedback_params" caption="Параметры обратной связи" ag-id="28" ag-hash="-1139606656">
		<parameter name="server_from" type="string" caption="Адрес сервера" description="с которого отправлять обратную связь"/>
		<parameter name="email_from" type="string" caption="Откуда" description="Адрес почтового ящика, с которого отправлять обратную связь"/>
		<parameter name="email_from_password" type="string" caption="Пароль" description="Для почтового ящика, с которого отправлять обратную связь"/>
		<parameter name="encoding" type="string" caption="Кодировка" description="В большинстве случаев подходит UTF-8"/>
	</item>



	<item name="bought" caption="Покупка" key="code" ag-id="16" ag-hash="-1383211797">
		<parameter name="code" type="string" caption="Код товара"/>
		<parameter name="name" type="string" caption="Название товара"/>
		<parameter name="qty" type="double" caption="Количество"/>
		<parameter name="price" type="currency" caption="Цена товара"/>
		<parameter name="sum" type="currency" caption="Полная стоимость"/>
		<child item="product" single="true"/>
	</item>

	<item name="cart" caption="Корзина" virtual="true" ag-id="17" ag-hash="3046176">
		<parameter name="order_num" type="string" caption="Номер заказа"/>
		<parameter name="qty" type="double" caption="Количество товаров"/>
		<parameter name="sum" type="currency" caption="Общая сумма"/>
		<parameter name="processed" type="byte" caption="Корзина уже обработана"/>
		<child item="bought"/>
	</item>

	<item name="counter" caption="Счетчик номера договора" ag-id="29" ag-hash="957830652">
		<parameter name="count" type="integer" caption="Счетчик"/>
	</item>

	<!--/////////////                            END КОРЗИНА                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->



	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--/////////////                             РЕГИСТРАЦИЯ                              ////////////-->

	<item name="purchase" caption="Заказ" key="num" ag-id="30" ag-hash="1743324417">
		<parameter name="num" caption="Номер" type="string"/>
		<parameter name="date" caption="Дата" type="date"/>
		<parameter name="qty" type="double" caption="Количество товаров"/>
		<parameter name="sum" type="currency" caption="Общая сумма"/>
		<child item="bought"/>
	</item>

	<item name="user" caption="Зарегистрированный пользователь" key="email" ag-id="31" ag-hash="3599307">
		<parameter name="email" type="string" caption="E-mail"/>
		<parameter name="password" type="string" caption="Пароль"/>
		<child item="purchase"/>
	</item>

	<item name="user_jur" caption="Юридическое лицо" super="user" ag-id="23" ag-hash="-266151405">
		<parameter name="organization" type="string" caption="Наименование организации" />
		<parameter name="phone" type="string" caption="Телефон/факс" />
		<parameter name="contact_name" type="string" caption="Контактное лицо" />
		<parameter name="contact_phone" type="string" caption="Телефон контактного лица" />
		<parameter name="email" type="string" caption="E-mail" />
		<parameter name="address" type="string" caption="Юридический адрес" />
		<parameter name="ship_type" type="string" caption="Способ доставки" />
		<parameter name="no_account" type="string" caption="Нет расчетного счета" domain="yes-no"/>
		<parameter name="account" type="string" caption="Расчетный счет" />
		<parameter name="bank" type="string" caption="Название банка" />
		<parameter name="bank_address" type="string" caption="Адрес банка"/>
		<parameter name="bank_code" type="string" caption="Код банка" />
		<parameter name="unp" type="string" caption="УНП" />
		<parameter name="director" type="string" caption="Ф.И.О директора" />
		<parameter name="base" type="string" caption="Действует на основании" />
		<parameter name="base_number" type="string" caption="Номер свиделельства/доверенности" />
		<parameter name="base_date" type="string" caption="Дата свиделельства/доверенности" />
		<parameter name="comment" type="string" caption="Дополнительно" />
	</item>

	<item name="user_phys" caption="Физическое лицо" super="user" ag-id="24" ag-hash="339407622" >
		<parameter name="name" type="string" caption="Имя"/>
		<parameter name="phone" type="string" caption="Телефон"/>
		<parameter name="address" type="string" caption="Адрес" />
		<parameter name="ship_type" type="string" caption="Способ доставки" />
		<parameter name="comment" type="string" caption="Дополнительно" />
	</item>


	<item name="registered_catalog" caption="Каталог пользователей" ag-id="32" ag-hash="-755203236">
		<child item="user"/>
	</item>



	<!--///////////////////////////////             МЕНЕДЖЕРЫ            //////////////////////////////-->



	<item name="manager_catalog" caption="Каталог менеджеров" ag-id="33" ag-hash="993532295">
		<child item="manager"/>
	</item>


	<assoc name="manages" caption="Заказы менеджера" transitive="true" ag-id="2" ag-hash="835260334"/>


	<item name="manager" caption="Менеджер" key="name" ag-id="34" ag-hash="835260333">
		<on-create class="extra.ManageUsers.OnCreate"/>
		<on-update class="extra.ManageUsers.OnUpdate"/>
		<on-delete class="extra.ManageUsers.OnDelete"/>
		<parameter name="name" type="string" caption="ФИО"/>
		<parameter name="email" type="string" caption="Email"/>
		<parameter name="password" type="string" caption="Пароль"/>
		<child item="user" assoc="manages"/>
		<child item="purchase" assoc="manages"/>
	</item>



	<!--/////////////                            END КОРЗИНА                               ////////////-->
	<!--/////////////                                                                      ////////////-->
	<!--///////////////////////////////////////////////////////////////////////////////////////////////-->




	<item name="news_item" key="header date" caption="Новость или статья" key-unique="true" default-page="news_item" ag-id="11" ag-hash="300774655">
		<parameter name="header" type="string" caption="Заголовок"/>
		<parameter name="date" type="date" caption="Дата публикации"/>
		<parameter name="main_pic" type="picture" caption="Главное изображение" description="для списка статей или новостей"/>
		<parameter name="short" type="tiny-text" caption="Краткое описание" description="для списка статей или новостей"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="news" caption="Новости" ag-id="12" ag-hash="3377875">
		<child item="news_item"/>
	</item>

	<item name="articles" caption="Статьи" ag-id="13" ag-hash="-1228877251">
		<child item="news_item"/>
	</item>

	<item name="main_promo_bottom" caption="Промо-блок на главной" key="text_big" ag-id="14" ag-hash="1303283745">
		<parameter name="text_big" type="string" caption="Текст крупным шрифтом"/>
		<parameter name="text_small" type="string" caption="Текст мелким шрифтом"/>
		<parameter name="pic" type="picture" caption="Изображение"/>
		<parameter name="link" type="string" caption="Ссылка" description="начиная с http://"/>
	</item>

	<item name="main_page" caption="Главная страница" ag-id="15" ag-hash="-251149995">
		<child item="main_promo_bottom" inline="true"/>
	</item>

	<item name="dealer_coords" caption="Дилер" key="name" ag-id="18" ag-hash="-1075960572">
		<parameter name="name" type="string" caption="Название"/>
		<parameter name="address" type="string" caption="Адрес" description="начиная с названия города"/>
		<parameter name="info" type="short-text" caption="Инофрмация" description="телефоны, ардес сайта и т.д."/>
	</item>

	<item name="dealers_page" caption="Карта дилеров" ag-id="19" ag-hash="811291188">
		<child item="dealer_coords"/>
	</item>

	<item name="docs" caption="Документация" ag-id="20" ag-hash="3088955">
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="contacts" caption="Контакты" ag-id="21" ag-hash="-567451565">
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="map" type="plain-text" caption="Код карты" format="height: 50px"/>
		<parameter name="bottom_text" type="text" caption="Как добраться"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>

	<item name="common" caption="На всех страницах" ag-id="22" ag-hash="-1354814997">
		<parameter name="top" type="short-text" caption="Верх" description="телефоны"/>
		<parameter name="left" type="short-text" caption="Заказ и консультация" description="под каталогом"/>
		<parameter name="link_text" type="string" caption="Текст ссылки на акцию" description="выводится слева под каталогом"/>
		<parameter name="link_link" type="string" caption="Ссылка на акцию" description="начиная с http://"/>
		<parameter name="bottom" type="short-text" caption="Телефоны внизу"/>
		<parameter name="bottom_address" type="short-text" caption="Адрес внизу"/>
	</item>


	<item name="feedback_form" caption="Форма обратной связи" virtual="true" ag-id="25" ag-hash="-1950071490">
		<parameter name="name" type="string" caption="Имя"/>
		<parameter name="phone" type="string" caption="Телефон"/>
		<parameter name="email" type="string" caption="E-mail"/>
		<parameter name="message" type="string" caption="Сообщение" />
	</item>

	<item name="custom_pages" caption="Одиночные страницы" ag-id="26" ag-hash="727106934">
		<child item="custom_page"/>
	</item>

	<item name="custom_page" caption="Одиночная страница" key="header" key-unique="true" default-page="page" ag-id="27" ag-hash="-1777660259">
		<parameter name="header" type="string" caption="Заголовок"/>
		<parameter name="text" type="text" caption="Текст"/>
		<parameter name="text_pic" type="picture" caption="Картинка для вставки в текст" multiple="true"/>
	</item>


	<root>
		<child item="feedback_params" single="true" />
		<child item="catalog" single="true" />
		<child item="back_catalog" single="true" />
		<child item="main_page" single="true"/>
		<child item="news" single="true"/>
		<child item="articles" single="true"/>
		<child item="dealers_page" single="true"/>
		<child item="docs" single="true"/>
		<child item="contacts" single="true"/>
		<child item="common" single="true"/>
		<child item="custom_pages" single="true"/>
		<child item="registered_catalog" single="true"/>
		<child item="manager_catalog" single="true"/>
		<child item="counter" single="true" virtual="true"/>
	</root>


<!--EXP-->
</model>