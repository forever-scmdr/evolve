<?xml version="1.0" encoding="UTF-8"?><xsl:stylesheet	xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 	xmlns:ext="http://exslt.org/common"	xmlns="http://www.w3.org/1999/xhtml"	version="2.0"	xmlns:f="f:f"	exclude-result-prefixes="xsl ext">	<xsl:import href="utils/price_conversions.xsl"/>	<xsl:output method="html" encoding="UTF-8" media-type="text/html" indent="yes" omit-xml-declaration="yes"/>	<xsl:variable name="is_jur" select="not(page/user_jur/input/organization = '')"/>	<xsl:variable name="is_phys" select="not($is_jur)"/>	<xsl:variable name="cart" select="page/cart"/>	<xsl:variable name="contacts" select="if ($is_jur) then page/user_jur/input else page/user_phys/input"/>	<xsl:variable name="main_host" select="if(page/url_seo_wrap/main_host != '') then page/url_seo_wrap/main_host else page/base" />	<xsl:variable name="registration" select="page/registration[f:num(@id) &gt; 0]"/>	<xsl:variable name="debt" select="if ($registration/debt and not($registration/debt = '') and not(normalize-space($registration/debt) = '0')) then $registration/debt else false() "/>	<xsl:variable name="is_reg_jur" select="$registration/@type = 'user_jur'"/>	<xsl:variable name="discount" select="if ($is_reg_jur and $registration/discount and not($registration/discount = '')) then f:num($registration/discount) else 0"/>	<xsl:template match="/">		<html lang="en">			<head>				<meta charset="UTF-8"/>				<style>					*{ font-family: 'Arial Unicode MS';}					body {					font-size: 13px;					}					table, td {					border-collapse: collapse;					border: 1px solid #000;					}					table {					margin-bottom: 16px;					}					td {					padding: 2px 4px;					}					p {					margin: 0;					}				</style>			</head>			<body>				<p>Частное торговое унитарное предприятие "Фрезерпром"</p>				<p>УНП:691814125</p>				<p>Р/сч: BY27TECN30121609100150000000</p>				<p>в ОАО ''Технобанк'' 220002, г.Минск,ул.Кропоткина, 44 код TECNBY22</p>				<p>Адрес: 220131, г.Минск, пер.Кольцова 4-й, 51, пом. 92</p>				<h1>Счет №<xsl:value-of select="$cart/order_num"/> от <xsl:value-of select="$cart/extra_date_str"/></h1>				<p>Заказчик: <xsl:value-of select="$contacts/name"/><xsl:value-of select="$contacts/organization"/></p>				<p>Плательщик: <xsl:value-of select="$contacts/name"/><xsl:value-of select="$contacts/organization"/></p>				<p>УНП: <xsl:value-of select="$contacts/unp"/></p>				<p>Р/сч: <xsl:value-of select="$contacts/account"/></p>				<p><xsl:value-of select="concat($contacts/bank, ' ', $contacts/bank_address)"/></p>				<p>код <xsl:value-of select="$contacts/bank_code"/></p>				<p>Адрес: <xsl:value-of select="$contacts/address"/>, тел.: <xsl:value-of select="$contacts/phone"/></p>				<h2>Цель приобретения</h2>				<table>					<tr>						<td>№</td>						<td>Наименование товара</td>						<td>Ед. изм.</td>						<td>Количество</td>						<td>Цена, BYN</td>						<td>Сумма, BYN</td>						<td>Ставка НДС, %</td>						<td>Сумма НДС, BYN</td>						<td>Всего с НДС, BYN</td>					</tr>					<xsl:for-each select="$cart/bought[not(not_available = '1') and f:num(sum) != 0]">						<xsl:variable name="product" select="//page/product[code = current()/code]"/>						<xsl:variable name="has_price" select="if ($is_reg_jur) then ($product/price_opt and $product/price_opt != '0') else ($product/price and $product/price != '0')"/>						<xsl:variable name="price" select="if ($is_reg_jur and $has_price) then f:number_decimal(f:num($product/price_opt) div 100 * (100 - $discount)) else $product/price"/>						<tr>							<td><xsl:value-of select="position()" /></td>							<td><xsl:value-of select="$product/code"/><xsl:text> </xsl:text><xsl:value-of select="$product/name"/></td>							<td>шт</td>							<td><xsl:value-of select="f:num(qty)"/></td>							<td><xsl:value-of select="$price"/></td>							<td><xsl:value-of select="f:num(sum)"/></td>							<td>Без НДС</td>							<td></td>							<td><xsl:value-of select="f:num(sum)"/></td>						</tr>					</xsl:for-each>					<tr>						<td></td>						<td></td>						<td></td>						<td></td>						<td><strong>Итого:</strong></td>						<td><strong><xsl:value-of select="f:num($cart/sum_discount)"/></strong></td>						<td></td>						<td></td>						<td><xsl:value-of select="f:num($cart/sum_discount)"/></td>					</tr>				</table>				<p><strong>Сумма НДС: Ноль белорусских рублей 00 копеек</strong></p>				<p><strong>Всего к оплате  на сумму с НДС: <xsl:value-of select="$cart/extra_sum_str" /></strong></p>				<br/>				<br/>				<p>Директор _______________ (В.В. Давыдчик)</p>				<br/>				<br/>				<p>Главный бухгалтер _______________ (М.Н. Шилович)</p>			</body>		</html></xsl:template></xsl:stylesheet>